{% extends "base.html" %}  
{% load static %} <!-- NOTE: this line is needed on ALL templates -->

{% block content %}

    {% if messages %}
        {% for message in messages %}

            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
                <div class="mx-auto alert alert-danger w-50 mt-3" id="flash-message" role="alert"> {{ message }} </div>
            {% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                <div class="mx-auto alert alert-success w-50 mt-3" id="flash-message" role="alert"> {{ message }} </div>
            {% else %}
                <div class="mx-auto alert alert-primary w-50 mt-3" id="flash-message" role="alert"> {{ message }} </div>
            {% endif %}

        {% endfor %} 
    {% endif %}

<body>

    <!-- display flash messages -->

    <h1> Student dashboard</h1>

    <!-- display interviews -->

    {% if interview %}

      <h3 class="display-6 mt-5 mb-4">Your upcoming interview</h3>
                
      <div class="card p-2 mb-4" style="max-width: 700px;"> 
        <div class="card-body d-flex justify-content-between">
            <div style="flex: 1;"> 
                <h5 class="card-title mb-3">Fake Interview</h5>
                <p class="text-body-secondary mb-3">
                    {{date}} {{mode}}, with 
                    <a href="{% url 'recruiter-details' recruiter.recruiterID %}">{{recruiter.fullName}}</a>
                </p>
                <p class="mb-3"><strong>Status:</strong> {{ interview.outcome }}</p> 
            </div>
            <!-- This is the recruiter version, it will be removed here when the recruiter dashboard is added and moved there-->
            <div style="flex: 1; padding-left: 20px;"> 
                <form method="post" action="{% url 'update_interview' interview.interviewID %}">
                    {% csrf_token %}
                    <select name="new_outcome" class="form-select mb-3" aria-label="Select Interview Outcome"> <!-- Added margin bottom -->
                        <option value="accepted">Accepted</option>
                        <option value="pending">Pending</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Update</button>
                </form>
            </div>
        </div>
    </div>
    {% else %}
        <p>No upcoming interviews</p>
    {% endif %}
        

    <a href="{% url 'logout' %}" class="btn btn-primary col-3">Log out</button>

    <!-- delete student account button here... -->

</body> 

{% endblock %}
