{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container">

    <!-- AdminName will be replaced with username once admin log-in is successful -->
    <header class="display-5 mt-5 mb-3">Welcome to the Dashboard, {{ request.user }}</header>

    <div class="row justify-content-center">

        <div class="col-lg-8 col-md-10">

            <h3 class="display-6 my-5">Analytics</h3>

            <div class="card my-3">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <p class="mb-0 text-muted"><span class="fw-bold" style="color:black;">Candidate Histogram</span></p>
                    <button id="run_candidate_histogram" class="btn btn-primary fw-bold">
                        Run
                    </button>
                </div>
            </div>
            <div id="candidate_histogram_img" class="chart-img" style="display: none;">
                <img src="" alt="Candidate Histogram" class="img-fluid" id="candidate_histogram_image">
            </div>

            <div class="card my-3">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <p class="mb-0 text-muted"><span class="fw-bold" style="color:black;">Course Count</span></p>
                    <button id="run_course_count" class="btn btn-primary fw-bold">
                        Run
                    </button>
                </div>
            </div>
            <div id="course_count_img" class="chart-img" style="display: none;">
                <img src="" alt="Course Count" class="img-fluid" id="course_count_image">
            </div>

            <div class="card my-3">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <p class="mb-0 text-muted"><span class="fw-bold" style="color:black;">Job Min Score Count</span></p>
                    <button id="run_job_min_score_count" class="btn btn-primary fw-bold">
                        Run
                    </button>
                </div>
            </div>
            <div id="job_min_score_count_img" class="chart-img" style="display: none;">
                <img src="" alt="Job Min Score Count" class="img-fluid" id="job_min_score_count_image">
            </div>

        </div>

    </div>

</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#run_candidate_histogram').click(function() {
            $.getJSON("{% url 'candidate_histogram' %}", function(data) {
                $('#candidate_histogram_image').attr('src', data.chart_path);
                $('#candidate_histogram_img').show();
            });
        });

        $('#run_course_count').click(function() {
            $.getJSON("{% url 'course_count_call' %}", function(data) {
                $('#course_count_image').attr('src', data.chart_path);
                $('#course_count_img').show();
            });
        });

        $('#run_job_min_score_count').click(function() {
            $.getJSON("{% url 'job_min_score_count_call' %}", function(data) {
                $('#job_min_score_count_image').attr('src', data.chart_path);
                $('#job_min_score_count_img').show();
            });
        });
    });
</script>

{% endblock %}
